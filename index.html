<!DOCTYPE html>
<html>
<head>
	<title>NYT-API</title>
    <script src='https://code.jquery.com/jquery-2.1.3.min.js'>
    </script>
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" >


</head>
<body>
	
	<header>
		<div id = 'topPage'>New York Times Search</div>
	</header>

	<section>
		<div class="inputHeader">
  				<h3>Example page header</h3>
  	</div>			

  	<form id="formInput">
			<div class="form-group">
			  <label class="control-label" for="inputError1">Search Term:</label>
			  <input type="text" class="form-control" id="searchterm">
			</div>
			<div class="form-group">
			  <label class="control-label" for="inputError1">Number of Records to Retrieve:</label>
			  <input type="text" class="form-control" id="numrecs">
			</div>
			<div class="form-group has-error">
			  <label class="control-label" for="inputError1">Start Year (Optional):</label>
			  <input type="text" class="form-control" id="startyr">
			</div>
			<div class="form-group has-error">
			  <label class="control-label" for="inputError1">End Year (Optional):</label>
			  <input type="text" class="form-control" id="endyr">
			</div>
		</form>

		<div class = 'buttons'>
			<button type="button" class="btn btn-default" id="btnSearch" style='background-color: #902929;color: white;'>Search</button>
			<button type="button" class="btn btn-default" id="btnClear" style='background-color: #902929;color: white;'>Clear Results</button>
		</div>	
		<div id="tkdiv">hello</div>

	</section>

	<script>
	
		$(document).ready(function() {


						$("#btnSearch").on("click", function(event)  {
							//$("#searchterm").val( "beach boys" );  // set the value for test purposes
							var q = $("#searchterm").val().trim();
							console.log("NY Times API has been called. Please wait for its response. ");
							//alert("Search btn clicked");
							//alert("q=" + q);

						// query statement setup
            var url = "https://api.nytimes.com/svc/search/v2/articlesearch.json";
						url += '?' + $.param({
 						 	'api-key': "b66102deb71f4f7691fa9ef69cd8ddbc",
  						'q': q
						});

						$.ajax({
						  url: url,
						  method: 'GET',
						})
						.done(function(result) {
						  	consoleIt(result, q);
						}).fail(function(err) {
						  throw err;
							});


						})  // end #btnSearch on click

						$("#btnClear").on("click", function(event)  {
								//alert("Clear btn clicked");
								$("#searchterm").val( "" );
								$("#numrecs").val( "" );
								$("#startyr").val( "" );
								$("#endyr").val( "" );

						})



						function consoleIt(result, q){
						  //console.log("result data:" + JSON.stringify(result));
						  //console.log("web_url:" + result.response.docs[0].web_url);
						  //console.log("headline:" + result.response.docs[0].headline.main);

						  console.log("NY TIMES API");
						  console.log("Search Term = " + q);
						  console.log("Headlines returned from the API...");
						  for (var i = 0; i < result.response.docs.length; i++) {
						  		console.log(i+1, "==> ",result.response.docs[i].headline.main);
						  }
						}
				
})
        
	</script>

</body>
</html>